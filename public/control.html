<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Control Panel</title>
  <style>
    /* Simple modal styles */
    #loginModal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
    }
    #loginBox {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <h1>Control Panel</h1>

  <!-- Control Buttons -->
  <div id="controls" style="display:none;">
    <button onclick="sendCommand('arg')">ARG</button>
    <button onclick="sendCommand('sound1')">Sound Effect 1</button>
    <button onclick="sendCommand('sound2')">Sound Effect 2</button>
    <button onclick="sendCommand('sound3')">Sound Effect 3</button>
    <button onclick="sendCommand('glitch')">Screen Glitch</button>
    <div>
      <label for="volumeSlider">Volume: <span id="volumeValue">50%</span></label><br>
      <input type="range" id="volumeSlider" min="0" max="100" value="50">
      <button onclick="saveVolume()">Save Volume</button>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal">
    <div id="loginBox">
      <h2>Login</h2>
      <label>Username: <input type="text" id="loginUser"></label><br><br>
      <label>Password: <input type="password" id="loginPass"></label><br><br>
      <button onclick="attemptLogin()">Login</button>
      <p id="loginError" style="color:red; display:none;">Invalid credentials</p>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const LOGIN_USER = 'admin';
    const LOGIN_PASS = 'secret';
    const socket = io();

    // Show login modal on load
    window.onload = () => {
      document.getElementById('loginModal').style.display = 'flex';
    };

    function attemptLogin() {
      const user = document.getElementById('loginUser').value;
      const pass = document.getElementById('loginPass').value;
      if (user === LOGIN_USER && pass === LOGIN_PASS) {
        document.getElementById('loginModal').style.display = 'none';
        document.getElementById('controls').style.display = 'block';
      } else {
        document.getElementById('loginError').style.display = 'block';
      }
    }

    // Command functions
    function sendCommand(cmd) {
      socket.emit('command', cmd);
    }

    const volumeSlider = document.getElementById('volumeSlider');
    const volumeValue = document.getElementById('volumeValue');
    volumeSlider.addEventListener('input', () => {
      volumeValue.innerText = volumeSlider.value + '%';
    });

    function saveVolume() {
      const vol = volumeSlider.value;
      socket.emit('volume', { volume: vol });
    }
  </script>
</body>
</html>