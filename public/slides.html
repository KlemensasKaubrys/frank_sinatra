<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <title>Frank Sinatra – Creepy ARG</title>
  <style>
    /* Base & Slide Layout */
    body, html {
      margin: 0; padding: 0;
      overflow: hidden; width: 100vw; height: 100vh;
      font-family: 'Georgia', serif;
      background-color: #000; color: #fff;
    }
    #slides { position: relative; width: 100%; height: 100%; }
    .slide {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
      display: none; box-sizing: border-box;
    }
    .slide.active { display: block; }

    /* Slide 1 */
    .slide.one {
      background-color: black; color: white;
    }
    .slide.one .header { background-color: #2ca39f; height: 150px; }
    .slide.one .content {
      padding: 40px; position: relative;
    }
    .slide.one h1 { font-size: 60px; }
    .slide.one p { font-size: 24px; color: #bbb; }
    .slide.one img {
      position: absolute; top: 30px; right: 40px;
      width: 35%; max-width: 450px; border-radius: 10px;
    }

    /* Slides 2–4 */
    .slide.two, .slide.three, .slide.four {
      background-color: #f9f4ea; color: black;
      padding: 40px; position: relative;
    }
    .slide.two h1, .slide.three h1, .slide.four h1 {
      font-size: 50px;
    }
    .slide.two p, .slide.three p, .slide.four p {
      font-size: 29px; line-height: 1.6; width: 60%;
    }
    .slide.two img, .slide.three img, .slide.four img {
      width: 35%; max-width: 450px;
      position: absolute; top: 40px; right: 40px;
      border-radius: 10px; box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    }
    .slide.two .footer,
    .slide.three .footer,
    .slide.four .footer {
      background-color: #2ca39f;
      height: 10px; position: absolute;
      bottom: 0; left: 0; width: 100%;
    }

    /* ARG Mode */
    .arg-mode {
      filter: invert(1) hue-rotate(180deg);
    }
    .arg-text {
      position: absolute;
      top: 20px; left: 20px;
      color: red;
      font-size: 20px;
      line-height: 1.2;
      white-space: pre-wrap;
      max-width: 90%;
      animation: flicker 0.2s infinite;
    }
    @keyframes flicker {
      0%,19%,21%,50%,100% { opacity: 1; }
      20%,24%,55% { opacity: 0.1; }
    }

    /* Glitch 1 – Violent Shake */
    body.glitch1 {
      animation: shakeViolent 0.3s infinite;
    }
    @keyframes shakeViolent {
      0%   { transform: translate(0,0)    rotate(0); }
      10%  { transform: translate(-20px, 20px) rotate(-2deg); }
      20%  { transform: translate(20px, -20px) rotate(2deg); }
      30%  { transform: translate(-20px, -20px) rotate(-3deg); }
      40%  { transform: translate(20px, 20px) rotate(3deg); }
      50%  { transform: translate(-20px, 20px) rotate(-2deg); }
      60%  { transform: translate(20px, -20px) rotate(2deg); }
      70%  { transform: translate(-20px, -20px) rotate(-3deg); }
      80%  { transform: translate(20px, 20px) rotate(3deg); }
      90%  { transform: translate(-20px, -20px) rotate(-1deg); }
      100% { transform: translate(0,0)    rotate(0); }
    }

    /* Glitch 2 – Datamosh clones */
    .datamosh-clone {
      position: absolute;
      pointer-events: none;
      opacity: 0.6;
      mix-blend-mode: difference;
    }

    /* Glitch 3 – Text disappear */
    body.glitch3 .slide p,
    body.glitch3 .arg-text {
      visibility: hidden;
    }
  </style>
</head>
<body>
  <div id="slides">
    <!-- Slide 1 -->
    <section class="slide one active">
      <div class="header"></div>
      <div class="content">
        <h1>Frank Sinatra</h1>
        <p>Klemensas Kaubrys 10B</p>
        <img
          src="sinatra1.jpg"
          data-alt="sinatra1_alt.jpg"
          alt="Frank Sinatra">
      </div>
    </section>

    <!-- Slide 2 -->
    <section class="slide two">
      <h1>Ankstyvas gyvenimas</h1>
      <img
        src="sinatra2.jpg"
        data-alt="sinatra2_alt.jpg"
        alt="Jaunasis Frank Sinatra">
      <p>
        Frank Sinatra gimė 1915 m. gruodžio 12 dieną, Hobokene, Naujajame Džersyje, italų imigrantų šeimoje. Jo šeima gyveno kukliai, o jaunasis Frankas nuo pat vaikystės rodė ypatingą susidomėjimą muzika. Jis dažnai dainuodavo mokyklos renginiuose, vietiniuose klubuose ir radijo laidose. Jo balsas ir charizma padėjo jam greitai tapti pastebėtam muzikos pasaulyje.
      </p>
      <div class="footer"></div>
    </section>

    <!-- Slide 3 -->
    <section class="slide three">
      <h1>Karjera ir šlovė</h1>
      <img
        src="sinatra3.jpg"
        data-alt="sinatra3_alt.gif"
        alt="Sinatra karjeros viršūnėje">
      <p>
        Sinatra tapo viena didžiausių XX amžiaus žvaigždžių, atlikdamas tokius hitus kaip „My Way“, „Strangers in the Night“ ir „Fly Me to the Moon“. Jo dainos tapo klasika, o pats Sinatra – populiariosios muzikos ikona. Be muzikos, Sinatra taip pat turėjo sėkmingą aktoriaus karjerą, už vaidmenį filme „From Here to Eternity“ (1953) buvo apdovanotas „Oskaru“.      
      </p>
      <div class="footer"></div>
    </section>

    <!-- Slide 4 -->
    <section class="slide four">
      <h1>Palikimas ir asmeninis gyvenimas</h1>
      <img
        src="sinatra4.jpg"
        data-alt="sinatra4_alt.jpg"
        alt="Vyresnysis Frank Sinatra">
      <p>
        Sinatra buvo charizmatiška ir kontraversiška asmenybė. Jis buvo vedęs keturis kartus, tarp jo žmonų – garsios aktorės Ava Gardner ir Mia Farrow. Frank Sinatra mirė 1998 m. gegužės 14 dieną Kalifornijoje, palikdamas didžiulę įtaką muzikai ir populiariajai kultūrai. Jo muzika iki šių dienų populiari visame pasaulyje ir įkvepia naujas kartas atlikėjų.      
      </p>
      <div class="footer"></div>
    </section>
  </div>

  <!-- Audio -->
  <audio id="sound1" src="sound1.mp3"></audio>
  <audio id="sound2" src="sound2.mp3"></audio>
  <audio id="sound3" src="sound3.mp3"></audio>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const slides = document.querySelectorAll('.slide');
    let current = 0;

    // Slide nav
    function showSlide(n) {
      // Before hiding the old slide, clear any ARG overlays
      argOff();

      slides[current].classList.remove('active');
      current = (n + slides.length) % slides.length;
      slides[current].classList.add('active');

      // If ARG-mode is still on, re-apply overlay on the new slide
      if (document.body.classList.contains('arg-mode')) {
        argOn();
      }
    }
    document.addEventListener('keydown', e => {
      if (e.key==='ArrowRight') showSlide(current+1);
      if (e.key==='ArrowLeft')  showSlide(current-1);
    });

    // Fullscreen
    window.addEventListener('load', () => {
      const el=document.documentElement;
      if(el.requestFullscreen) el.requestFullscreen().catch(()=>{});
    });

    // ARG gibberish lines
    const glitchLines = [
      "P̸͎͉͍͜a̷͇̩̻̣̭͖s̷͔̻̱̗ş̸͙̻̜̮̭e̵͖͈͓d̶̩ ̴͇̰i̵͍̖͔̺̞n̵̰̳͎ ̶̭̞t̷̜͖ḥ̷̞̣̭e̷̗͜ ̷̢̧̤m̴̻̰ạ̷̙̖r̷̤̞g̷͎̟͍i̶̟̻ͅn̶̤͇͎s̴͓͇",
      "W̷̞̱̲e̵͇ ̷͓͎a̷̤r̷͖͔ḛ̵͈ ̷͎̞̠d̴̞̲o̴̤͜t̴̝t̵̫̭e̷͓͈d̶͚͚ ̵͇͔o̴͖̠u̷̳̖t̴̼̹ ̷͇͎ḇ̷͔e̷͖͇l̶̤̪o̷̼̹w̴͓̥",
      "G̵͔̖l̴̢͎i̶͙t̵͙͙c̷̠̹h̶̬͕ ̶̻̮t̶̜h̴͖̻e̷̲ͅ ̴͎͇͖ţ̵̥e̴͖̣x̶̫t̷͚̖u̵͙̱r̸͉̟e̵͔̼",
      "D̷̻͓r̷̻̣i̶͖̬p̶̟̣ ̶͚̳o̵͖̪u̷̳͖t̴̼̹ ̴͔͈i̴̤͕n̸̡̲ ̴̢̭t̵͙̮h̶̗̯e̸͍̭ ̴̘ͦs̴̰̠h̶̭͍a̸̧̱d̸͓̭o̶̘̭w̶̡͇s̷̺̲"
    ];
    const baseGibber = glitchLines.join(' ') + ' ';
    const gargle = baseGibber.repeat(30);
    const argMessages = [gargle, gargle, gargle, gargle];

    // Audio helpers
    function setVolume(n){
      [1,2,3].forEach(i=>{
        const a=document.getElementById('sound'+i);
        a.volume=Math.min(Math.max(n/100,0),1);
      });
    }
    function playSound(i){
      const a=document.getElementById('sound'+i);
      a.currentTime=0; a.play();
    }

    // ARG ON/OFF
    function argOn(){
      document.body.classList.add('arg-mode');
      const slide=slides[current];
      const img=slide.querySelector('img');
      if(!img.dataset.orig) img.dataset.orig=img.src;
      img.src=img.dataset.alt;
      const div=document.createElement('div');
      div.className='arg-text';
      div.textContent=argMessages[current];
      div.id='arg-text';
      slide.appendChild(div);
    }
    function argOff(){
      document.body.classList.remove('arg-mode');
      // Restore every slide image
      slides.forEach(slide => {
        const img = slide.querySelector('img');
        if (img.dataset.orig) {
          img.src = img.dataset.orig;
          delete img.dataset.orig;
        }
      });
      // Remove all ARG text overlays
      document.querySelectorAll('.arg-text').forEach(el => el.remove());
    }

    // Glitch2 clones
    let datamoshInterval;
    function glitch2On(){
      const slide=slides[current];
      const img=slide.querySelector('img');
      datamoshInterval = setInterval(()=>{
        const clone = img.cloneNode();
        clone.className='datamosh-clone';
        const size = 0.2+Math.random()*0.8;
        clone.style.width=(img.clientWidth*size)+'px';
        clone.style.top = Math.random()*window.innerHeight+'px';
        clone.style.left= Math.random()*window.innerWidth+'px';
        clone.style.transform = `rotate(${Math.random()*360}deg)`;
        document.body.appendChild(clone);
        setTimeout(()=>clone.remove(), 500 + Math.random()*1000);
      }, 100);
    }
    function glitch2Off(){ clearInterval(datamoshInterval); document.querySelectorAll('.datamosh-clone').forEach(n=>n.remove()); }

    // Glitch handlers
    function glitch1On(){ document.body.classList.add('glitch1'); }
    function glitch1Off(){ document.body.classList.remove('glitch1'); }
    function glitch2OnWrap(){ glitch2On(); }
    function glitch2OffWrap(){ glitch2Off(); }
    function glitch3On(){ document.body.classList.add('glitch3'); }
    function glitch3Off(){ document.body.classList.remove('glitch3'); }

    // Socket events
    socket.on('command', cmd=>{
      switch(cmd){
        case 'arg_down':     argOn();       break;
        case 'arg_up':       argOff();      break;
        case 'sound1':       playSound(1);  break;
        case 'sound2':       playSound(2);  break;
        case 'sound3':       playSound(3);  break;
        case 'glitch1_down': glitch1On();   break;
        case 'glitch1_up':   glitch1Off();  break;
        case 'glitch2_down': glitch2OnWrap();break;
        case 'glitch2_up':   glitch2OffWrap();break;
        case 'glitch3_down': glitch3On();   break;
        case 'glitch3_up':   glitch3Off();  break;
      }
    });
    socket.on('volume', data=> setVolume(data.volume));
  </script>
</body>
</html>
